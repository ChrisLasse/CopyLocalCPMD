AR     = /usr/bin/ar ruv
RANLIB = /usr/bin/ranlib
FFLAGS =  -g -traceback -qopenmp  -r8 -pc64 -axCORE-AVX2,AVX -msse4.2 -unroll -funroll-loops \
         -O2  -heap-arrays 64
CPPFLAGS =

FC = mpif90 

GRIMME_LIB = libgrimmevdw.a
SRC_GRIMME = vdw_calculator.F90 vdw_interface.F90 vdw_param.F90
.SUFFIXES: .F90 .f90

%.mod:

%.o:    %.F90 
	$(FC) -c $(FFLAGS) $(CPPFLAGS) -o $@ $(@F:.o=.F90)


OBJ_GRIMME     = $(SRC_GRIMME:%.F90=%.o)
$(GRIMME_LIB): $(OBJ_GRIMME)
	$(AR) $(GRIMME_LIB) $(OBJ_GRIMME)
	$(RANLIB) $(GRIMME_LIB)


vdw_interface.mod: vdw_interface.o
	@true
vdw_param.mod: vdw_param.o
	@true
vdw_interface.o: vdw_param.mod vdw_calculator.mod vdw_interface.F90
vdw_calculator.o: vdw_param.mod vdw_calculator.F90


clean: 
	rm -f *.o
